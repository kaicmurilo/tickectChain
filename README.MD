# AplicaÃ§Ã£o de Venda de Ingressos com React e Blockchain

Esta aplicaÃ§Ã£o permite a venda de ingressos utilizando React para o frontend, Solidity para os smart contracts na blockchain Ethereum, MetaMask para interaÃ§Ã£o com a carteira do usuÃ¡rio e armazenamento de dados na blockchain para persistÃªncia.

## ğŸ“‹ Ãndice

- [VisÃ£o Geral](#visÃ£o-geral)
- [ğŸ“¦ Estrutura do Projeto](#-estrutura-do-projeto)
- [âš™ï¸ PrÃ©-requisitos](#ï¸-prÃ©-requisitos)
- [ğŸš€ InstalaÃ§Ã£o](#-instalaÃ§Ã£o)
  - [1. Clonar o RepositÃ³rio](#1-clonar-o-repositÃ³rio)
  - [2. Configurar o Backend (Truffle e Smart Contracts)](#2-configurar-o-backend-truffle-e-smart-contracts)
    - [a. Navegar para o DiretÃ³rio do Backend](#a-navegar-para-o-diretÃ³rio-do-backend)
    - [b. Instalar DependÃªncias](#b-instalar-dependÃªncias)
    - [c. Iniciar a Blockchain Local com Ganache](#c-iniciar-a-blockchain-local-com-ganache)
    - [d. Compilar os Contratos](#d-compilar-os-contratos)
    - [e. Migrar os Contratos para a Blockchain](#e-migrar-os-contratos-para-a-blockchain)
  - [3. Configurar o Frontend (React)](#3-configurar-o-frontend-react)
    - [a. Navegar para o DiretÃ³rio do Frontend](#a-navegar-para-o-diretÃ³rio-do-frontend)
    - [b. Instalar DependÃªncias](#b-instalar-dependÃªncias-1)
    - [c. Configurar o Frontend](#c-configurar-o-frontend)
- [ğŸ”§ Executando a AplicaÃ§Ã£o](#-executando-a-aplicaÃ§Ã£o)
  - [1. Iniciar o Backend](#1-iniciar-o-backend)
  - [2. Iniciar o Frontend](#2-iniciar-o-frontend)
- [ğŸ”„ Refazer o Build](#-refazer-o-build)
- [ğŸ“‚ Estrutura do Projeto](#-estrutura-do-projeto)
- [ğŸ› ï¸ SoluÃ§Ã£o de Problemas](#ï¸-soluÃ§Ã£o-de-problemas)
- [ğŸ“š Recursos Adicionais](#-recursos-adicionais)
- [ğŸ“„ LicenÃ§a](#-licenÃ§a)

## VisÃ£o Geral

A aplicaÃ§Ã£o consiste em duas partes principais:

1. **Backend**: Smart contracts desenvolvidos em Solidity e gerenciados pelo Truffle. Utiliza Ganache para uma blockchain local de desenvolvimento.
2. **Frontend**: AplicaÃ§Ã£o React que interage com os smart contracts atravÃ©s do Web3.js e MetaMask.

## ğŸ“¦ Estrutura do Projeto

```
ticket-sale-app/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ contracts/
â”‚   â”‚   â”œâ”€â”€ Migrations.sol
â”‚   â”‚   â””â”€â”€ TicketSale.sol
â”‚   â”œâ”€â”€ migrations/
â”‚   â”‚   â”œâ”€â”€ 1_initial_migration.js
â”‚   â”‚   â””â”€â”€ 2_deploy_contracts.js
â”‚   â”œâ”€â”€ build/
â”‚   â”‚   â””â”€â”€ contracts/
â”‚   â”‚       â”œâ”€â”€ Migrations.json
â”‚   â”‚       â””â”€â”€ TicketSale.json
â”‚   â”œâ”€â”€ test/
â”‚   â”œâ”€â”€ truffle-config.js
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ contracts/
â”‚   â”‚   â”‚   â””â”€â”€ TicketSale.json
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â””â”€â”€ getWeb3.js
â”‚   â”‚   â”œâ”€â”€ App.js
â”‚   â”‚   â””â”€â”€ index.js
â”‚   â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ ... (outros arquivos do React)
â””â”€â”€ README.md
```

## âš™ï¸ PrÃ©-requisitos

Antes de comeÃ§ar, certifique-se de ter instalado o seguinte em sua mÃ¡quina:

- [Node.js](https://nodejs.org/) (v16.x ou superior)
- [npm](https://www.npmjs.com/) (geralmente vem com o Node.js)
- [Truffle](https://www.trufflesuite.com/truffle) (`npm install -g truffle`)
- [Ganache](https://www.trufflesuite.com/ganache) (GUI ou CLI)
- [MetaMask](https://metamask.io/) (extensÃ£o do navegador)

## ğŸš€ InstalaÃ§Ã£o

### 1. Clonar o RepositÃ³rio

Primeiro, clone este repositÃ³rio para sua mÃ¡quina local:

```bash
git clone https://github.com/seu-usuario/ticket-sale-app.git
cd ticket-sale-app
```

### 2. Configurar o Backend (Truffle e Smart Contracts)

#### a. Navegar para o DiretÃ³rio do Backend

```bash
cd backend
```

#### b. Instalar DependÃªncias

Embora o Truffle seja instalado globalmente, Ã© uma boa prÃ¡tica instalar tambÃ©m localmente:

```bash
npm install
```

#### c. Iniciar a Blockchain Local com Ganache

Abra um novo terminal e inicie o Ganache. Se estiver usando a versÃ£o CLI:

```bash
ganache-cli
```

Ou, se estiver usando a GUI, abra o Ganache e inicie uma nova blockchain local.

#### d. Compilar os Contratos

No diretÃ³rio `backend/`, execute:

```bash
truffle compile
```

#### e. Migrar os Contratos para a Blockchain

Certifique-se de que o Ganache estÃ¡ rodando e execute:

```bash
truffle migrate --reset
```

**Nota**: O `--reset` forÃ§a a reimplantaÃ§Ã£o de todos os contratos.

### 3. Configurar o Frontend (React)

#### a. Navegar para o DiretÃ³rio do Frontend

Em outro terminal, navegue para o diretÃ³rio do frontend:

```bash
cd ../frontend
```

#### b. Instalar DependÃªncias

Instale as dependÃªncias necessÃ¡rias do React:

```bash
npm install
```

#### c. Configurar o Frontend

Copie o arquivo `TicketSale.json` gerado pelo Truffle para o frontend:

```bash
cp ../backend/build/contracts/TicketSale.json src/contracts/
```

Assegure-se de que o arquivo `src/contracts/TicketSale.json` existe.

## ğŸ”§ Executando a AplicaÃ§Ã£o

### 1. Iniciar o Backend

Certifique-se de que o Ganache estÃ¡ rodando e que os contratos estÃ£o migrados conforme os passos acima.

### 2. Iniciar o Frontend

No diretÃ³rio `frontend/`, execute:

```bash
npm start
```

Isso iniciarÃ¡ a aplicaÃ§Ã£o React em `http://localhost:3000`.

**Nota**: Abra o navegador e conecte o MetaMask Ã  rede local (normalmente `http://127.0.0.1:8545`). Importe uma das contas fornecidas pelo Ganache para o MetaMask para interagir com os contratos.

## ğŸ”„ Refazer o Build

Se vocÃª precisar refazer o build dos contratos ou do frontend, siga os passos abaixo.

### Backend (Truffle)

1. **Limpar os Artefatos de CompilaÃ§Ã£o**:

   ```bash
   rm -rf build/
   ```

2. **Recompilar os Contratos**:

   ```bash
   truffle compile
   ```

3. **Migrar Novamente os Contratos**:

   ```bash
   truffle migrate --reset
   ```

### Frontend (React)

1. **Reinstalar DependÃªncias (se necessÃ¡rio)**:

   ```bash
   npm install
   ```

2. **Recompilar o Frontend**:

   ```bash
   npm run build
   ```

   Isso criarÃ¡ uma versÃ£o otimizada para produÃ§Ã£o na pasta `build/`.

## ğŸ“‚ Estrutura do Projeto

### Backend (`backend/`)

- **contracts/**: ContÃ©m os smart contracts Solidity.
  - `Migrations.sol`: Contrato de migraÃ§Ã£o padrÃ£o do Truffle.
  - `TicketSale.sol`: Contrato principal para venda de ingressos.
- **migrations/**: Scripts de migraÃ§Ã£o para implantar os contratos.
  - `1_initial_migration.js`: MigraÃ§Ã£o para o contrato `Migrations`.
  - `2_deploy_contracts.js`: MigraÃ§Ã£o para o contrato `TicketSale`.
- **build/**: Artefatos compilados gerados pelo Truffle.
- **truffle-config.js**: ConfiguraÃ§Ã£o do Truffle.

### Frontend (`frontend/`)

- **src/**
  - **contracts/**: ContÃ©m os artefatos do contrato `TicketSale.json`.
  - **utils/**: UtilitÃ¡rios, como `getWeb3.js` para configurar o Web3.
  - `App.js`: Componente principal React.
  - `index.js`: Ponto de entrada do React.

## ğŸ› ï¸ SoluÃ§Ã£o de Problemas

- **Erro ao Migrar Contratos**: Certifique-se de que o Ganache estÃ¡ rodando e que as configuraÃ§Ãµes de rede no `truffle-config.js` estÃ£o corretas.
- **MetaMask NÃ£o Conecta Ã  Rede Local**:
  - Verifique se a rede local estÃ¡ selecionada no MetaMask.
  - Importe uma das contas do Ganache no MetaMask usando a chave privada fornecida pelo Ganache.
- **Ingressos NÃ£o Aparecem como DisponÃ­veis**:
  - Verifique se os contratos foram migrados corretamente.
  - Atualize o frontend para refletir os dados mais recentes da blockchain.

## ğŸ“š Recursos Adicionais

- [DocumentaÃ§Ã£o do Truffle](https://www.trufflesuite.com/docs)
- [DocumentaÃ§Ã£o do React](https://reactjs.org/docs/getting-started.html)
- [DocumentaÃ§Ã£o do Web3.js](https://web3js.readthedocs.io/)
- [DocumentaÃ§Ã£o do MetaMask](https://docs.metamask.io/)
- [Solidity Documentation](https://docs.soliditylang.org/)

## ğŸ“„ LicenÃ§a

Este projeto estÃ¡ licenciado sob a licenÃ§a [MIT](LICENSE).

---

**Desenvolvido por [Seu Nome](https://github.com/seu-usuario)**
